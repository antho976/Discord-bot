/**
 * Classes and Skills Data - Tier 3
 * Data-driven design with meaningful, non-trivial skills
 * 
 * SKILL SYSTEM V2:
 * - No mana costs - uses TURN COOLDOWN only
 * - Skills are UNLOCKABLE via skill points (gained every 2 levels)
 * - Skills can be UPGRADED (3 levels per skill)
 * - Starting skills are given at class unlock
 * - Advanced skills unlock at specific levels
 */

export const CLASSES = {
  warrior: {
    id: 'warrior',
    name: 'Warrior',
    description: 'Strong melee fighter with high defense',
    mainStat: 'strength', // Main stat for gear scaling
    statBonuses: { strength: 5, defense: 4, vitality: 3, hp: 30 },
    startingSkills: ['slash', 'shield_bash'],
    skillTree: [
      { skillId: 'slash', unlockLevel: 1, pointCost: 0 }, // Free starter
      { skillId: 'shield_bash', unlockLevel: 1, pointCost: 0 }, // Free starter
      { skillId: 'parry', unlockLevel: 3, pointCost: 1 },
      { skillId: 'cleave', unlockLevel: 5, pointCost: 1 },
      { skillId: 'battle_shout', unlockLevel: 8, pointCost: 2 },
      { skillId: 'whirlwind', unlockLevel: 12, pointCost: 2 },
      { skillId: 'execute', unlockLevel: 15, pointCost: 3 },
      { skillId: 'reckless_strike', unlockLevel: 18, pointCost: 2 },
      { skillId: 'unstoppable', unlockLevel: 20, pointCost: 3 },
      { skillId: 'iron_skin', unlockLevel: 25, pointCost: 3 },
      { skillId: 'crushing_blow', unlockLevel: 28, pointCost: 4 },
      { skillId: 'shield_wall', unlockLevel: 30, pointCost: 4 },
      { skillId: 'berserker_rage', unlockLevel: 33, pointCost: 4 },
      { skillId: 'retaliate', unlockLevel: 35, pointCost: 5 },
      { skillId: 'earthquake', unlockLevel: 40, pointCost: 5 },
    ],
  },
  mage: {
    id: 'mage',
    name: 'Mage',
    description: 'Powerful spellcaster with high intelligence',
    mainStat: 'intelligence', // Main stat for gear scaling
    statBonuses: { intelligence: 5, wisdom: 3, agility: 2, mana: 40 },
    startingSkills: ['ice_spike', 'lightning_bolt'],
    skillTree: [
      { skillId: 'ice_spike', unlockLevel: 1, pointCost: 0 }, // Free starter
      { skillId: 'lightning_bolt', unlockLevel: 1, pointCost: 0 }, // Free starter
      { skillId: 'fireball', unlockLevel: 3, pointCost: 1 },
      { skillId: 'mana_shield', unlockLevel: 5, pointCost: 1 },
      { skillId: 'arcane_blast', unlockLevel: 8, pointCost: 2 },
      { skillId: 'frost_nova', unlockLevel: 12, pointCost: 2 },
      { skillId: 'meteor', unlockLevel: 15, pointCost: 3 },
      { skillId: 'overcharge_blast', unlockLevel: 18, pointCost: 2 },
      { skillId: 'time_warp', unlockLevel: 20, pointCost: 3 },
      { skillId: 'inferno', unlockLevel: 25, pointCost: 3 },
      { skillId: 'chain_lightning', unlockLevel: 28, pointCost: 4 },
      { skillId: 'dimensional_rift', unlockLevel: 30, pointCost: 4 },
      { skillId: 'spell_amplify', unlockLevel: 33, pointCost: 4 },
      { skillId: 'mana_burst', unlockLevel: 35, pointCost: 5 },
      { skillId: 'supernova', unlockLevel: 40, pointCost: 5 },
    ],
  },
  rogue: {
    id: 'rogue',
    name: 'Rogue',
    description: 'Fast and precise damage dealer',
    mainStat: 'agility', // Main stat for gear scaling
    statBonuses: { agility: 5, strength: 2, defense: 1 },
    startingSkills: ['backstab', 'evade'],
    skillTree: [
      { skillId: 'backstab', unlockLevel: 1, pointCost: 0 }, // Free starter
      { skillId: 'evade', unlockLevel: 1, pointCost: 0 }, // Free starter
      { skillId: 'poison_strike', unlockLevel: 3, pointCost: 1 },
      { skillId: 'shadow_step', unlockLevel: 5, pointCost: 1 },
      { skillId: 'smoke_bomb', unlockLevel: 8, pointCost: 2 },
      { skillId: 'blade_flurry', unlockLevel: 12, pointCost: 2 },
      { skillId: 'assassinate', unlockLevel: 15, pointCost: 3 },
      { skillId: 'shadow_gamble', unlockLevel: 18, pointCost: 2 },
      { skillId: 'vanish', unlockLevel: 20, pointCost: 3 },
      { skillId: 'riposte', unlockLevel: 25, pointCost: 3 },
      { skillId: 'death_mark', unlockLevel: 28, pointCost: 4 },
      { skillId: 'shadow_clone', unlockLevel: 30, pointCost: 4 },
      { skillId: 'master_assassin', unlockLevel: 33, pointCost: 4 },
      { skillId: 'shadow_dance', unlockLevel: 35, pointCost: 5 },
      { skillId: 'shadow_tsunami', unlockLevel: 40, pointCost: 5 },
    ],
  },
  paladin: {
    id: 'paladin',
    name: 'Paladin',
    description: 'Holy warrior with healing and support',
    mainStat: 'wisdom', // Main stat for gear scaling
    statBonuses: { strength: 3, defense: 3, wisdom: 4, mana: 20 },
    startingSkills: ['holy_strike', 'heal'],
    skillTree: [
      { skillId: 'holy_strike', unlockLevel: 1, pointCost: 0 }, // Free starter
      { skillId: 'heal', unlockLevel: 1, pointCost: 0 }, // Free starter
      { skillId: 'divine_protection', unlockLevel: 3, pointCost: 1 },
      { skillId: 'radiant_burst', unlockLevel: 5, pointCost: 1 },
      { skillId: 'consecration', unlockLevel: 8, pointCost: 2 },
      { skillId: 'judgment', unlockLevel: 12, pointCost: 2 },
      { skillId: 'divine_shield', unlockLevel: 15, pointCost: 3 },
      { skillId: 'martyr_strike', unlockLevel: 18, pointCost: 2 },
      { skillId: 'resurrection', unlockLevel: 20, pointCost: 3 },
      { skillId: 'holy_wrath', unlockLevel: 25, pointCost: 3 },
      { skillId: 'guardian_angel', unlockLevel: 28, pointCost: 4 },
      { skillId: 'sacred_ground', unlockLevel: 30, pointCost: 4 },
      { skillId: 'divine_retribution', unlockLevel: 33, pointCost: 4 },
      { skillId: 'blessing_of_light', unlockLevel: 35, pointCost: 5 },
      { skillId: 'purification', unlockLevel: 40, pointCost: 5 },
    ],
  },
};

export const SKILLS = {
  // ==================== WARRIOR SKILLS ====================
  slash: {
    id: 'slash',
    name: 'Slash',
    description: 'Basic melee attack with no cooldown',
    maxLevel: 3,
    levels: {
      1: { damage: 1.2, cooldown: 0, description: 'Deal 120% strength damage' },
      2: { damage: 1.4, cooldown: 0, description: 'Deal 140% strength damage' },
      3: { damage: 1.6, cooldown: 0, description: 'Deal 160% strength damage' },
    },
    passiveBonuses: { strength: 2 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.95,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 1.2 : level === 2 ? 1.4 : 1.6),
    aiWeights: { priority: 0.5, useWhenHpBelow: 0.2, useWhenEnemyStrong: 0.3, useAsFinisher: 0.3 },
    effects: [],
  },
  shield_bash: {
    id: 'shield_bash',
    name: 'Shield Bash',
    description: 'Stun enemy for 1 turn',
    maxLevel: 3,
    levels: {
      1: { damage: 0.8, cooldown: 3, stunDuration: 1, description: '80% damage, stun 1 turn, 3 turn CD' },
      2: { damage: 1.0, cooldown: 3, stunDuration: 1, description: '100% damage, stun 1 turn, 3 turn CD' },
      3: { damage: 1.2, cooldown: 2, stunDuration: 1, description: '120% damage, stun 1 turn, 2 turn CD' },
    },
    passiveBonuses: { defense: 2 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.9,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 0.8 : level === 2 ? 1.0 : 1.2),
    getCooldown: (level) => level === 3 ? 2 : 3,
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.5, useWhenEnemyStrong: 0.6, useAsFinisher: 0.2 },
    effects: [{ type: 'stun', duration: 1 }],
  },
  parry: {
    id: 'parry',
    name: 'Parry',
    description: 'Reduce incoming damage',
    maxLevel: 3,
    levels: {
      1: { reduction: 0.5, cooldown: 2, description: 'Block 50% damage, 2 turn CD' },
      2: { reduction: 0.65, cooldown: 2, description: 'Block 65% damage, 2 turn CD' },
      3: { reduction: 0.8, cooldown: 1, description: 'Block 80% damage, 1 turn CD' },
    },
    passiveBonuses: { defense: 1, vitality: 1 },
    type: 'defensive',
    element: 'physical',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 1 : 2,
    getEffects: (level) => [{ type: 'damage_reduction', value: level === 1 ? 0.5 : level === 2 ? 0.65 : 0.8, duration: 1 }],
    aiWeights: { priority: 0.6, useWhenHpBelow: 0.6, useWhenEnemyStrong: 0.5, useAsFinisher: 0.0 },
  },
  cleave: {
    id: 'cleave',
    name: 'Cleave',
    description: 'Powerful sweeping strike',
    maxLevel: 3,
    levels: {
      1: { damage: 1.5, cooldown: 3, description: '150% damage, 3 turn CD' },
      2: { damage: 1.8, cooldown: 3, description: '180% damage, 3 turn CD' },
      3: { damage: 2.2, cooldown: 2, description: '220% damage, 2 turn CD' },
    },
    passiveBonuses: { strength: 2 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.9,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 1.5 : level === 2 ? 1.8 : 2.2),
    getCooldown: (level) => level === 3 ? 2 : 3,
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.5, useAsFinisher: 0.4 },
    effects: [],
  },
  reckless_strike: {
    id: 'reckless_strike',
    name: 'Reckless Strike',
    description: 'Massive damage at the cost of leaving yourself exposed',
    maxLevel: 3,
    levels: {
      1: { damage: 2.4, cooldown: 3, description: '240% damage, become Exposed for 2 turns' },
      2: { damage: 2.8, cooldown: 3, description: '280% damage, become Exposed for 2 turns' },
      3: { damage: 3.2, cooldown: 2, description: '320% damage, become Exposed for 2 turns' },
    },
    passiveBonuses: { strength: 3 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.85,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 2.4 : level === 2 ? 2.8 : 3.2),
    getCooldown: (level) => level === 3 ? 2 : 3,
    getEffects: () => [{ type: 'self_exposed', value: 0.25, duration: 2 }],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.6, useAsFinisher: 0.7 },
  },
  battle_shout: {
    id: 'battle_shout',
    name: 'Battle Shout',
    description: 'Boost strength for multiple turns',
    maxLevel: 3,
    levels: {
      1: { boost: 0.3, duration: 2, cooldown: 4, description: '+30% strength for 2 turns, 4 turn CD' },
      2: { boost: 0.4, duration: 3, cooldown: 4, description: '+40% strength for 3 turns, 4 turn CD' },
      3: { boost: 0.5, duration: 3, cooldown: 3, description: '+50% strength for 3 turns, 3 turn CD' },
    },
    passiveBonuses: { strength: 3 },
    type: 'buff',
    element: 'physical',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 3 : 4,
    getEffects: (level) => [{ 
      type: 'strength_boost', 
      value: level === 1 ? 0.3 : level === 2 ? 0.4 : 0.5, 
      duration: level === 1 ? 2 : 3 
    }],
    aiWeights: { priority: 0.65, useWhenHpBelow: 0.5, useWhenEnemyStrong: 0.7, useAsFinisher: 0.3 },
  },
  whirlwind: {
    id: 'whirlwind',
    name: 'Whirlwind',
    description: 'Devastating 360-degree attack',
    maxLevel: 3,
    levels: {
      1: { damage: 2.0, cooldown: 4, description: '200% damage, 4 turn CD' },
      2: { damage: 2.5, cooldown: 4, description: '250% damage, 4 turn CD' },
      3: { damage: 3.0, cooldown: 3, description: '300% damage, 3 turn CD' },
    },
    passiveBonuses: { strength: 3, vitality: 2 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.85,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 2.0 : level === 2 ? 2.5 : 3.0),
    getCooldown: (level) => level === 3 ? 3 : 4,
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.6, useAsFinisher: 0.7 },
    effects: [],
  },
  execute: {
    id: 'execute',
    name: 'Execute',
    description: 'Massive damage to low HP enemies',
    maxLevel: 3,
    levels: {
      1: { damage: 2.5, bonusBelowHp: 0.3, cooldown: 5, description: '250% damage, +100% if enemy <30% HP, 5 turn CD' },
      2: { damage: 3.0, bonusBelowHp: 0.4, cooldown: 5, description: '300% damage, +100% if enemy <40% HP, 5 turn CD' },
      3: { damage: 3.5, bonusBelowHp: 0.5, cooldown: 4, description: '350% damage, +100% if enemy <50% HP, 4 turn CD' },
    },
    passiveBonuses: { strength: 4, vitality: 2 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.95,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 2.5 : level === 2 ? 3.0 : 3.5),
    getCooldown: (level) => level === 3 ? 4 : 5,
    aiWeights: { priority: 0.85, useWhenHpBelow: 0.2, useWhenEnemyStrong: 0.5, useAsFinisher: 0.95 },
    effects: [],
  },
  unstoppable: {
    id: 'unstoppable',
    name: 'Unstoppable',
    description: 'Immune to CC, massive defense boost',
    maxLevel: 3,
    levels: {
      1: { defenseBoost: 0.5, duration: 2, cooldown: 6, description: '+50% defense, immune to stun/slow for 2 turns, 6 turn CD' },
      2: { defenseBoost: 0.7, duration: 2, cooldown: 5, description: '+70% defense, immune to stun/slow for 2 turns, 5 turn CD' },
      3: { defenseBoost: 1.0, duration: 3, cooldown: 5, description: '+100% defense, immune to stun/slow for 3 turns, 5 turn CD' },
    },
    passiveBonuses: { defense: 5, vitality: 3 },
    type: 'defensive',
    element: 'physical',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 5 : level === 2 ? 5 : 6,
    getEffects: (level) => [
      { type: 'defense_boost', value: level === 1 ? 0.5 : level === 2 ? 0.7 : 1.0, duration: level === 3 ? 3 : 2 },
      { type: 'cc_immune', duration: level === 3 ? 3 : 2 }
    ],
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.6, useWhenEnemyStrong: 0.8, useAsFinisher: 0.0 },
  },
  iron_skin: {
    id: 'iron_skin',
    name: 'Iron Skin',
    description: 'Harden body to reduce all damage',
    maxLevel: 3,
    levels: {
      1: { damageReduction: 0.35, cooldown: 4, description: '35% damage reduction for 3 turns, 4 turn CD' },
      2: { damageReduction: 0.45, cooldown: 4, description: '45% damage reduction for 3 turns, 4 turn CD' },
      3: { damageReduction: 0.55, cooldown: 3, description: '55% damage reduction for 4 turns, 3 turn CD' },
    },
    passiveBonuses: { defense: 5, vitality: 3 },
    type: 'defensive',
    element: 'physical',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 3 : 4,
    getEffects: (level) => [{ type: 'damage_reduction', value: level === 1 ? 0.35 : level === 2 ? 0.45 : 0.55, duration: level === 3 ? 4 : 3 }],
    aiWeights: { priority: 0.6, useWhenHpBelow: 0.7, useWhenEnemyStrong: 0.75, useAsFinisher: 0.0 },
  },
  crushing_blow: {
    id: 'crushing_blow',
    name: 'Crushing Blow',
    description: 'Devastating strike that ignores defense',
    maxLevel: 3,
    levels: {
      1: { damage: 2.2, defenseIgnore: 0.5, cooldown: 4, description: '220% damage, ignore 50% defense, 4 turn CD' },
      2: { damage: 2.7, defenseIgnore: 0.65, cooldown: 4, description: '270% damage, ignore 65% defense, 4 turn CD' },
      3: { damage: 3.3, defenseIgnore: 0.8, cooldown: 3, description: '330% damage, ignore 80% defense, 3 turn CD' },
    },
    passiveBonuses: { strength: 5 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.9,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 2.2 : level === 2 ? 2.7 : 3.3),
    getCooldown: (level) => level === 3 ? 3 : 4,
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.6, useAsFinisher: 0.75 },
  },
  shield_wall: {
    id: 'shield_wall',
    name: 'Shield Wall',
    description: 'Block all damage for one turn',
    maxLevel: 3,
    levels: {
      1: { durability: 1.0, cooldown: 6, description: '100% damage block 1 turn, 6 turn CD' },
      2: { durability: 1.0, cooldown: 5, description: '100% damage block 1 turn, 5 turn CD' },
      3: { durability: 1.0, cooldown: 4, counterDamage: 0.5, description: '100% block, 50% counter, 4 turn CD' },
    },
    passiveBonuses: { defense: 6, vitality: 2 },
    type: 'defensive',
    element: 'physical',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 1 ? 6 : level === 2 ? 5 : 4,
    getEffects: (level) => [{ type: 'shield', value: 1.0, duration: 1 }],
    aiWeights: { priority: 0.75, useWhenHpBelow: 0.8, useWhenEnemyStrong: 0.85, useAsFinisher: 0.0 },
  },
  berserker_rage: {
    id: 'berserker_rage',
    name: 'Berserker Rage',
    description: 'Enter rage mode for massive damage',
    maxLevel: 3,
    levels: {
      1: { damageBoost: 0.6, cooldown: 5, duration: 3, description: '+60% damage for 3 turns, 5 turn CD' },
      2: { damageBoost: 0.85, cooldown: 5, duration: 3, description: '+85% damage for 3 turns, 5 turn CD' },
      3: { damageBoost: 1.1, cooldown: 4, duration: 4, description: '+110% damage for 4 turns, 4 turn CD' },
    },
    passiveBonuses: { strength: 6, defense: -2 },
    type: 'buff',
    element: 'physical',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 4 : 5,
    getEffects: (level) => [{ type: 'strength_boost', value: level === 1 ? 0.6 : level === 2 ? 0.85 : 1.1, duration: level === 3 ? 4 : 3 }],
    aiWeights: { priority: 0.75, useWhenHpBelow: 0.4, useWhenEnemyStrong: 0.7, useAsFinisher: 0.6 },
  },
  retaliate: {
    id: 'retaliate',
    name: 'Retaliate',
    description: 'Counter enemy attacks for damage',
    maxLevel: 3,
    levels: {
      1: { counterChance: 0.4, damageMultiplier: 0.8, cooldown: 3, duration: 3, description: '40% counter 80% damage for 3 turns, 3 turn CD' },
      2: { counterChance: 0.55, damageMultiplier: 1.0, cooldown: 3, duration: 3, description: '55% counter 100% damage for 3 turns, 3 turn CD' },
      3: { counterChance: 0.7, damageMultiplier: 1.3, cooldown: 2, duration: 4, description: '70% counter 130% damage for 4 turns, 2 turn CD' },
    },
    passiveBonuses: { strength: 4, defense: 3 },
    type: 'counter',
    element: 'physical',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 2 : 3,
    getEffects: (level) => [{ type: 'counter', chance: level === 1 ? 0.4 : level === 2 ? 0.55 : 0.7, multiplier: level === 1 ? 0.8 : level === 2 ? 1.0 : 1.3, duration: level === 3 ? 4 : 3 }],
    aiWeights: { priority: 0.65, useWhenHpBelow: 0.5, useWhenEnemyStrong: 0.8, useAsFinisher: 0.2 },
  },
  earthquake: {
    id: 'earthquake',
    name: 'Earthquake',
    description: 'Massive area strike that stuns',
    maxLevel: 3,
    levels: {
      1: { damage: 2.5, stunChance: 0.6, cooldown: 6, description: '250% damage, 60% stun 2 turns, 6 turn CD' },
      2: { damage: 3.2, stunChance: 0.75, cooldown: 6, description: '320% damage, 75% stun 2 turns, 6 turn CD' },
      3: { damage: 4.0, stunChance: 0.9, cooldown: 5, description: '400% damage, 90% stun 3 turns, 5 turn CD' },
    },
    passiveBonuses: { strength: 5, vitality: 2 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.85,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 2.5 : level === 2 ? 3.2 : 4.0),
    getCooldown: (level) => level === 3 ? 5 : 6,
    getEffects: (level) => [{ type: 'stun', chance: level === 1 ? 0.6 : level === 2 ? 0.75 : 0.9, duration: level === 3 ? 3 : 2 }],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.2, useWhenEnemyStrong: 0.7, useAsFinisher: 0.8 },
  },

  // ==================== MAGE SKILLS ====================
  ice_spike: {
    id: 'ice_spike',
    name: 'Ice Spike',
    description: 'Frost damage that slows enemies',
    maxLevel: 3,
    levels: {
      1: { damage: 1.2, cooldown: 0, slowDuration: 1, description: '120% int damage, slow 1 turn' },
      2: { damage: 1.4, cooldown: 0, slowDuration: 1, description: '140% int damage, slow 1 turn' },
      3: { damage: 1.7, cooldown: 0, slowDuration: 2, description: '170% int damage, slow 2 turns' },
    },
    passiveBonuses: { intelligence: 2, agility: 1 },
    type: 'magical',
    element: 'ice',
    accuracy: 0.92,
    damageCalc: (stats, level) => stats.intelligence * (level === 1 ? 1.2 : level === 2 ? 1.4 : 1.7),
    getCooldown: () => 0,
    getEffects: (level) => [{ type: 'slow', duration: level === 3 ? 2 : 1 }],
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.5, useAsFinisher: 0.4 },
  },
  lightning_bolt: {
    id: 'lightning_bolt',
    name: 'Lightning Bolt',
    description: 'High accuracy electric strike',
    maxLevel: 3,
    levels: {
      1: { damage: 1.1, cooldown: 2, description: '110% int damage, 2 turn CD' },
      2: { damage: 1.3, cooldown: 2, description: '130% int damage, 2 turn CD' },
      3: { damage: 1.6, cooldown: 1, description: '160% int damage, 1 turn CD' },
    },
    passiveBonuses: { intelligence: 2, agility: 1 },
    type: 'magical',
    element: 'electric',
    accuracy: 0.98,
    damageCalc: (stats, level) => stats.intelligence * (level === 1 ? 1.1 : level === 2 ? 1.3 : 1.6),
    getCooldown: (level) => level === 3 ? 1 : 2,
    aiWeights: { priority: 0.75, useWhenHpBelow: 0.25, useWhenEnemyStrong: 0.6, useAsFinisher: 0.5 },
    effects: [],
  },
  fireball: {
    id: 'fireball',
    name: 'Fireball',
    description: 'Massive fire damage',
    maxLevel: 3,
    levels: {
      1: { damage: 1.8, cooldown: 3, description: '180% int damage, 3 turn CD' },
      2: { damage: 2.2, cooldown: 3, description: '220% int damage, 3 turn CD' },
      3: { damage: 2.7, cooldown: 2, description: '270% int damage, 2 turn CD' },
    },
    passiveBonuses: { intelligence: 3 },
    type: 'magical',
    element: 'fire',
    accuracy: 0.9,
    damageCalc: (stats, level) => stats.intelligence * (level === 1 ? 1.8 : level === 2 ? 2.2 : 2.7),
    getCooldown: (level) => level === 3 ? 2 : 3,
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.2, useWhenEnemyStrong: 0.7, useAsFinisher: 0.6 },
    effects: [],
  },
  mana_shield: {
    id: 'mana_shield',
    name: 'Mana Shield',
    description: 'Absorb incoming damage',
    maxLevel: 3,
    levels: {
      1: { absorb: 100, cooldown: 4, description: 'Absorb 100 damage, 4 turn CD' },
      2: { absorb: 150, cooldown: 4, description: 'Absorb 150 damage, 4 turn CD' },
      3: { absorb: 200, cooldown: 3, description: 'Absorb 200 damage, 3 turn CD' },
    },
    passiveBonuses: { intelligence: 2, defense: 1 },
    type: 'defensive',
    element: 'arcane',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 3 : 4,
    getEffects: (level) => [{ type: 'absorb', value: level === 1 ? 100 : level === 2 ? 150 : 200, duration: 1 }],
    aiWeights: { priority: 0.65, useWhenHpBelow: 0.55, useWhenEnemyStrong: 0.6, useAsFinisher: 0.0 },
  },
  arcane_blast: {
    id: 'arcane_blast',
    name: 'Arcane Blast',
    description: 'Pure arcane energy blast',
    maxLevel: 3,
    levels: {
      1: { damage: 2.0, cooldown: 4, description: '200% int damage, 4 turn CD' },
      2: { damage: 2.5, cooldown: 4, description: '250% int damage, 4 turn CD' },
      3: { damage: 3.0, cooldown: 3, description: '300% int damage, 3 turn CD' },
    },
    passiveBonuses: { intelligence: 4 },
    type: 'magical',
    element: 'arcane',
    accuracy: 0.95,
    damageCalc: (stats, level) => stats.intelligence * (level === 1 ? 2.0 : level === 2 ? 2.5 : 3.0),
    getCooldown: (level) => level === 3 ? 3 : 4,
    aiWeights: { priority: 0.75, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.6, useAsFinisher: 0.7 },
    effects: [],
  },
  overcharge_blast: {
    id: 'overcharge_blast',
    name: 'Overcharge Blast',
    description: 'Explosive arcane strike with backlash',
    maxLevel: 3,
    levels: {
      1: { damage: 2.6, cooldown: 3, description: '260% int damage, recoil and Weakened for 2 turns' },
      2: { damage: 3.0, cooldown: 3, description: '300% int damage, recoil and Weakened for 2 turns' },
      3: { damage: 3.5, cooldown: 2, description: '350% int damage, recoil and Weakened for 2 turns' },
    },
    passiveBonuses: { intelligence: 3 },
    type: 'magical',
    element: 'arcane',
    accuracy: 0.8,
    damageCalc: (stats, level) => stats.intelligence * (level === 1 ? 2.6 : level === 2 ? 3.0 : 3.5),
    getCooldown: (level) => level === 3 ? 2 : 3,
    getEffects: () => [
      { type: 'self_damage', value: 0.08 },
      { type: 'self_weakened', value: 0.2, duration: 2 },
    ],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.35, useWhenEnemyStrong: 0.65, useAsFinisher: 0.8 },
  },
  frost_nova: {
    id: 'frost_nova',
    name: 'Frost Nova',
    description: 'Freeze enemy in place',
    maxLevel: 3,
    levels: {
      1: { damage: 1.5, stunDuration: 1, cooldown: 5, description: '150% int damage, stun 1 turn, 5 turn CD' },
      2: { damage: 1.8, stunDuration: 1, cooldown: 4, description: '180% int damage, stun 1 turn, 4 turn CD' },
      3: { damage: 2.2, stunDuration: 2, cooldown: 4, description: '220% int damage, stun 2 turns, 4 turn CD' },
    },
    passiveBonuses: { intelligence: 3, wisdom: 2 },
    type: 'magical',
    element: 'ice',
    accuracy: 0.88,
    damageCalc: (stats, level) => stats.intelligence * (level === 1 ? 1.5 : level === 2 ? 1.8 : 2.2),
    getCooldown: (level) => level === 3 ? 4 : level === 2 ? 4 : 5,
    getEffects: (level) => [{ type: 'stun', duration: level === 3 ? 2 : 1 }],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.5, useWhenEnemyStrong: 0.7, useAsFinisher: 0.3 },
  },
  meteor: {
    id: 'meteor',
    name: 'Meteor',
    description: 'Devastating falling meteor',
    maxLevel: 3,
    levels: {
      1: { damage: 3.0, cooldown: 6, description: '300% int damage, 6 turn CD' },
      2: { damage: 3.5, cooldown: 5, description: '350% int damage, 5 turn CD' },
      3: { damage: 4.5, cooldown: 5, description: '450% int damage, 5 turn CD' },
    },
    passiveBonuses: { intelligence: 5, wisdom: 2 },
    type: 'magical',
    element: 'fire',
    accuracy: 0.85,
    damageCalc: (stats, level) => stats.intelligence * (level === 1 ? 3.0 : level === 2 ? 3.5 : 4.5),
    getCooldown: (level) => level === 1 ? 6 : 5,
    aiWeights: { priority: 0.9, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.7, useAsFinisher: 0.85 },
    effects: [],
  },
  time_warp: {
    id: 'time_warp',
    name: 'Time Warp',
    description: 'Reset all cooldowns and boost speed',
    maxLevel: 3,
    levels: {
      1: { cooldown: 8, agilityBoost: 0.5, duration: 2, description: 'Reset cooldowns, +50% agility for 2 turns, 8 turn CD' },
      2: { cooldown: 7, agilityBoost: 0.7, duration: 3, description: 'Reset cooldowns, +70% agility for 3 turns, 7 turn CD' },
      3: { cooldown: 6, agilityBoost: 1.0, duration: 3, description: 'Reset cooldowns, +100% agility for 3 turns, 6 turn CD' },
    },
    passiveBonuses: { intelligence: 3, wisdom: 3, agility: 2 },
    type: 'buff',
    element: 'arcane',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 1 ? 8 : level === 2 ? 7 : 6,
    getEffects: (level) => [
      { type: 'reset_cooldowns' },
      { type: 'agility_boost', value: level === 1 ? 0.5 : level === 2 ? 0.7 : 1.0, duration: level === 1 ? 2 : 3 }
    ],
    aiWeights: { priority: 0.85, useWhenHpBelow: 0.4, useWhenEnemyStrong: 0.6, useAsFinisher: 0.5 },
  },
  inferno: {
    id: 'inferno',
    name: 'Inferno',
    description: 'Massive fire explosion',
    maxLevel: 3,
    levels: {
      1: { damage: 2.5, burnable: 0.4, cooldown: 5, description: '250% int damage, 40% burn for 3 turns, 5 turn CD' },
      2: { damage: 3.1, burnable: 0.55, cooldown: 5, description: '310% int damage, 55% burn for 3 turns, 5 turn CD' },
      3: { damage: 3.8, burnable: 0.7, cooldown: 4, description: '380% int damage, 70% burn for 4 turns, 4 turn CD' },
    },
    passiveBonuses: { intelligence: 6, wisdom: 2 },
    type: 'magical',
    element: 'fire',
    accuracy: 0.9,
    damageCalc: (stats, level) => stats.intelligence * (level === 1 ? 2.5 : level === 2 ? 3.1 : 3.8),
    getCooldown: (level) => level === 3 ? 4 : 5,
    getEffects: (level) => [{ type: 'burn', chance: level === 1 ? 0.4 : level === 2 ? 0.55 : 0.7, duration: level === 3 ? 4 : 3 }],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.2, useWhenEnemyStrong: 0.65, useAsFinisher: 0.7 },
  },
  chain_lightning: {
    id: 'chain_lightning',
    name: 'Chain Lightning',
    description: 'Lightning that bounces between enemies',
    maxLevel: 3,
    levels: {
      1: { damage: 1.8, bounces: 2, cooldown: 4, description: '180% int damage, bounces 2 times, 4 turn CD' },
      2: { damage: 2.3, bounces: 3, cooldown: 4, description: '230% int damage, bounces 3 times, 4 turn CD' },
      3: { damage: 2.9, bounces: 4, cooldown: 3, description: '290% int damage, bounces 4 times, 3 turn CD' },
    },
    passiveBonuses: { intelligence: 5, agility: 2 },
    type: 'magical',
    element: 'lightning',
    accuracy: 0.88,
    damageCalc: (stats, level) => stats.intelligence * (level === 1 ? 1.8 : level === 2 ? 2.3 : 2.9),
    getCooldown: (level) => level === 3 ? 3 : 4,
    getEffects: (level) => [{ type: 'chain', bounces: level === 1 ? 2 : level === 2 ? 3 : 4 }],
    aiWeights: { priority: 0.75, useWhenHpBelow: 0.2, useWhenEnemyStrong: 0.6, useAsFinisher: 0.6 },
  },
  dimensional_rift: {
    id: 'dimensional_rift',
    name: 'Dimensional Rift',
    description: 'Pierce through reality for massive damage',
    maxLevel: 3,
    levels: {
      1: { damage: 2.8, ignoreDefense: 0.7, cooldown: 5, description: '280% int damage, ignore 70% def, 5 turn CD' },
      2: { damage: 3.5, ignoreDefense: 0.85, cooldown: 5, description: '350% int damage, ignore 85% def, 5 turn CD' },
      3: { damage: 4.3, ignoreDefense: 1.0, cooldown: 4, description: '430% int damage, ignore 100% def, 4 turn CD' },
    },
    passiveBonuses: { intelligence: 7, wisdom: 1 },
    type: 'magical',
    element: 'arcane',
    accuracy: 0.92,
    damageCalc: (stats, level) => stats.intelligence * (level === 1 ? 2.8 : level === 2 ? 3.5 : 4.3),
    getCooldown: (level) => level === 3 ? 4 : 5,
    getEffects: (level) => [{ type: 'armor_pierce', value: level === 1 ? 0.7 : level === 2 ? 0.85 : 1.0 }],
    aiWeights: { priority: 0.85, useWhenHpBelow: 0.2, useWhenEnemyStrong: 0.75, useAsFinisher: 0.85 },
  },
  spell_amplify: {
    id: 'spell_amplify',
    name: 'Spell Amplify',
    description: 'Amplify next spell for increased damage',
    maxLevel: 3,
    levels: {
      1: { amplification: 0.5, cooldown: 4, duration: 2, description: '+50% spell damage for 2 turns, 4 turn CD' },
      2: { amplification: 0.75, cooldown: 4, duration: 2, description: '+75% spell damage for 2 turns, 4 turn CD' },
      3: { amplification: 1.0, cooldown: 3, duration: 3, description: '+100% spell damage for 3 turns, 3 turn CD' },
    },
    passiveBonuses: { intelligence: 5, wisdom: 3 },
    type: 'buff',
    element: 'arcane',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 3 : 4,
    getEffects: (level) => [{ type: 'spell_amplify', value: level === 1 ? 0.5 : level === 2 ? 0.75 : 1.0, duration: level === 3 ? 3 : 2 }],
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.7, useAsFinisher: 0.4 },
  },
  mana_burst: {
    id: 'mana_burst',
    name: 'Mana Burst',
    description: 'Explode mana for damage boost',
    maxLevel: 3,
    levels: {
      1: { baseDamage: 2.0, manaMultiplier: 0.3, cooldown: 6, description: '200% damage + 30% mana as bonus damage, 6 turn CD' },
      2: { baseDamage: 2.6, manaMultiplier: 0.4, cooldown: 6, description: '260% damage + 40% mana as bonus damage, 6 turn CD' },
      3: { baseDamage: 3.3, manaMultiplier: 0.5, cooldown: 5, description: '330% damage + 50% mana as bonus damage, 5 turn CD' },
    },
    passiveBonuses: { intelligence: 6, wisdom: 2 },
    type: 'magical',
    element: 'arcane',
    accuracy: 0.95,
    damageCalc: (stats, level) => stats.intelligence * (level === 1 ? 2.0 : level === 2 ? 2.6 : 3.3),
    getCooldown: (level) => level === 3 ? 5 : 6,
    getEffects: (level) => [{ type: 'mana_conversion', multiplier: level === 1 ? 0.3 : level === 2 ? 0.4 : 0.5 }],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.2, useWhenEnemyStrong: 0.7, useAsFinisher: 0.75 },
  },
  supernova: {
    id: 'supernova',
    name: 'Supernova',
    description: 'Explosive spell that damages nearby area',
    maxLevel: 3,
    levels: {
      1: { damage: 3.2, aoe: true, cooldown: 7, description: '320% int damage, AOE effect, 7 turn CD' },
      2: { damage: 4.0, aoe: true, cooldown: 6, description: '400% int damage, AOE effect, 6 turn CD' },
      3: { damage: 5.0, aoe: true, cooldown: 5, description: '500% int damage, AOE effect, 5 turn CD' },
    },
    passiveBonuses: { intelligence: 7 },
    type: 'magical',
    element: 'fire',
    accuracy: 0.85,
    damageCalc: (stats, level) => stats.intelligence * (level === 1 ? 3.2 : level === 2 ? 4.0 : 5.0),
    getCooldown: (level) => level === 1 ? 7 : level === 2 ? 6 : 5,
    getEffects: (level) => [{ type: 'aoe' }],
    aiWeights: { priority: 0.9, useWhenHpBelow: 0.1, useWhenEnemyStrong: 0.8, useAsFinisher: 0.9 },
  },

  // ==================== ROGUE SKILLS ====================
  backstab: {
    id: 'backstab',
    name: 'Backstab',
    description: 'High critical chance attack',
    maxLevel: 3,
    levels: {
      1: { damage: 2.0, crit: 0.5, cooldown: 2, description: '200% damage, 50% crit chance, 2 turn CD' },
      2: { damage: 2.5, crit: 0.7, cooldown: 2, description: '250% damage, 70% crit chance, 2 turn CD' },
      3: { damage: 3.0, crit: 0.9, cooldown: 1, description: '300% damage, 90% crit chance, 1 turn CD' },
    },
    passiveBonuses: { agility: 3, strength: 1 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.9,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 2.0 : level === 2 ? 2.5 : 3.0),
    getCooldown: (level) => level === 3 ? 1 : 2,
    getEffects: (level) => [{ type: 'critical', chance: level === 1 ? 0.5 : level === 2 ? 0.7 : 0.9 }],
    aiWeights: { priority: 0.85, useWhenHpBelow: 0.25, useWhenEnemyStrong: 0.6, useAsFinisher: 0.9 },
  },
  evade: {
    id: 'evade',
    name: 'Evade',
    description: 'Dodge incoming attacks',
    maxLevel: 3,
    levels: {
      1: { dodgeChance: 0.6, duration: 1, cooldown: 3, description: '60% dodge for 1 turn, 3 turn CD' },
      2: { dodgeChance: 0.8, duration: 1, cooldown: 3, description: '80% dodge for 1 turn, 3 turn CD' },
      3: { dodgeChance: 1.0, duration: 2, cooldown: 2, description: '100% dodge for 2 turns, 2 turn CD' },
    },
    passiveBonuses: { agility: 2, defense: 1 },
    type: 'defensive',
    element: 'shadow',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 2 : 3,
    getEffects: (level) => [{ 
      type: 'dodge', 
      chance: level === 1 ? 0.6 : level === 2 ? 0.8 : 1.0, 
      duration: level === 3 ? 2 : 1 
    }],
    aiWeights: { priority: 0.6, useWhenHpBelow: 0.6, useWhenEnemyStrong: 0.5, useAsFinisher: 0.0 },
  },
  poison_strike: {
    id: 'poison_strike',
    name: 'Poison Strike',
    description: 'Deal damage over time',
    maxLevel: 3,
    levels: {
      1: { damage: 0.6, dotDamage: 15, dotDuration: 3, cooldown: 3, description: '60% damage + 15 per turn for 3 turns, 3 turn CD' },
      2: { damage: 0.8, dotDamage: 25, dotDuration: 3, cooldown: 3, description: '80% damage + 25 per turn for 3 turns, 3 turn CD' },
      3: { damage: 1.0, dotDamage: 40, dotDuration: 4, cooldown: 2, description: '100% damage + 40 per turn for 4 turns, 2 turn CD' },
    },
    passiveBonuses: { strength: 2 },
    type: 'physical',
    element: 'poison',
    accuracy: 0.85,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 0.6 : level === 2 ? 0.8 : 1.0),
    getCooldown: (level) => level === 3 ? 2 : 3,
    getEffects: (level) => [{ 
      type: 'poison', 
      duration: level === 3 ? 4 : 3, 
      damagePerTurn: level === 1 ? 15 : level === 2 ? 25 : 40 
    }],
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.55, useAsFinisher: 0.4 },
  },
  shadow_step: {
    id: 'shadow_step',
    name: 'Shadow Step',
    description: 'Become untargetable briefly',
    maxLevel: 3,
    levels: {
      1: { dodgeChance: 0.5, duration: 1, cooldown: 3, description: '50% dodge for 1 turn, 3 turn CD' },
      2: { dodgeChance: 0.7, duration: 2, cooldown: 3, description: '70% dodge for 2 turns, 3 turn CD' },
      3: { dodgeChance: 0.9, duration: 2, cooldown: 2, description: '90% dodge for 2 turns, 2 turn CD' },
    },
    passiveBonuses: { agility: 2 },
    type: 'defensive',
    element: 'shadow',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 2 : 3,
    getEffects: (level) => [{ 
      type: 'dodge', 
      chance: level === 1 ? 0.5 : level === 2 ? 0.7 : 0.9, 
      duration: level === 1 ? 1 : 2 
    }],
    aiWeights: { priority: 0.65, useWhenHpBelow: 0.5, useWhenEnemyStrong: 0.5, useAsFinisher: 0.0 },
  },
  smoke_bomb: {
    id: 'smoke_bomb',
    name: 'Smoke Bomb',
    description: 'Confuse enemy and boost evasion',
    maxLevel: 3,
    levels: {
      1: { dodgeBoost: 0.4, duration: 2, cooldown: 4, description: '+40% dodge for 2 turns, 4 turn CD' },
      2: { dodgeBoost: 0.5, duration: 3, cooldown: 4, description: '+50% dodge for 3 turns, 4 turn CD' },
      3: { dodgeBoost: 0.6, duration: 3, cooldown: 3, description: '+60% dodge for 3 turns, 3 turn CD' },
    },
    passiveBonuses: { agility: 3, defense: 2 },
    type: 'defensive',
    element: 'shadow',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 3 : 4,
    getEffects: (level) => [{ 
      type: 'agility_boost', 
      value: level === 1 ? 0.4 : level === 2 ? 0.5 : 0.6, 
      duration: level === 1 ? 2 : 3 
    }],
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.6, useWhenEnemyStrong: 0.6, useAsFinisher: 0.0 },
  },
  blade_flurry: {
    id: 'blade_flurry',
    name: 'Blade Flurry',
    description: 'Rapid strikes with blades',
    maxLevel: 3,
    levels: {
      1: { damage: 1.8, hits: 2, cooldown: 4, description: '180% damage x2 hits, 4 turn CD' },
      2: { damage: 2.0, hits: 3, cooldown: 4, description: '200% damage x3 hits, 4 turn CD' },
      3: { damage: 2.5, hits: 3, cooldown: 3, description: '250% damage x3 hits, 3 turn CD' },
    },
    passiveBonuses: { agility: 4, strength: 2 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.88,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 1.8 : level === 2 ? 2.0 : 2.5),
    getCooldown: (level) => level === 3 ? 3 : 4,
    aiWeights: { priority: 0.82, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.6, useAsFinisher: 0.75 },
    effects: [],
  },
  shadow_gamble: {
    id: 'shadow_gamble',
    name: 'Shadow Gamble',
    description: 'High-risk strike that can expose the enemy',
    maxLevel: 3,
    levels: {
      1: { damage: 2.2, cooldown: 2, description: '220% damage, inflict Exposed, bleed yourself' },
      2: { damage: 2.6, cooldown: 2, description: '260% damage, inflict Exposed, bleed yourself' },
      3: { damage: 3.0, cooldown: 1, description: '300% damage, inflict Exposed, bleed yourself' },
    },
    passiveBonuses: { agility: 3 },
    type: 'physical',
    element: 'shadow',
    accuracy: 0.75,
    damageCalc: (stats, level) => stats.agility * (level === 1 ? 2.2 : level === 2 ? 2.6 : 3.0),
    getCooldown: (level) => level === 3 ? 1 : 2,
    getEffects: () => [
      { type: 'exposed', value: 0.2, duration: 2 },
      { type: 'self_bleed', damagePerTurn: 0.05, duration: 2 },
    ],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.6, useAsFinisher: 0.8 },
  },
  assassinate: {
    id: 'assassinate',
    name: 'Assassinate',
    description: 'Execute low HP targets instantly',
    maxLevel: 3,
    levels: {
      1: { damage: 3.5, executeThreshold: 0.2, cooldown: 6, description: '350% damage, instant kill if <20% HP, 6 turn CD' },
      2: { damage: 4.0, executeThreshold: 0.3, cooldown: 5, description: '400% damage, instant kill if <30% HP, 5 turn CD' },
      3: { damage: 5.0, executeThreshold: 0.4, cooldown: 5, description: '500% damage, instant kill if <40% HP, 5 turn CD' },
    },
    passiveBonuses: { agility: 5, strength: 3 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.95,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 3.5 : level === 2 ? 4.0 : 5.0),
    getCooldown: (level) => level === 1 ? 6 : 5,
    aiWeights: { priority: 0.9, useWhenHpBelow: 0.2, useWhenEnemyStrong: 0.5, useAsFinisher: 0.98 },
    effects: [],
  },
  vanish: {
    id: 'vanish',
    name: 'Vanish',
    description: 'Disappear and reset combat state',
    maxLevel: 3,
    levels: {
      1: { dodgeDuration: 2, cooldown: 8, description: '100% dodge for 2 turns, reset cooldowns, 8 turn CD' },
      2: { dodgeDuration: 3, cooldown: 7, description: '100% dodge for 3 turns, reset cooldowns, 7 turn CD' },
      3: { dodgeDuration: 3, cooldown: 6, description: '100% dodge for 3 turns, reset cooldowns, heal 30%, 6 turn CD' },
    },
    passiveBonuses: { agility: 4, defense: 3 },
    type: 'defensive',
    element: 'shadow',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 1 ? 8 : level === 2 ? 7 : 6,
    getEffects: (level) => [
      { type: 'dodge', chance: 1.0, duration: level === 3 ? 3 : level === 2 ? 3 : 2 },
      { type: 'reset_cooldowns' },
      ...(level === 3 ? [{ type: 'heal', value: 0.3 }] : [])
    ],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.7, useWhenEnemyStrong: 0.6, useAsFinisher: 0.0 },
  },
  riposte: {
    id: 'riposte',
    name: 'Riposte',
    description: 'Parry and counter in one motion',
    maxLevel: 3,
    levels: {
      1: { parryChance: 0.5, counterDamage: 1.2, cooldown: 3, description: '50% parry counter with 120% damage, 3 turn CD' },
      2: { parryChance: 0.65, counterDamage: 1.5, cooldown: 3, description: '65% parry counter with 150% damage, 3 turn CD' },
      3: { parryChance: 0.8, counterDamage: 1.9, cooldown: 2, description: '80% parry counter with 190% damage, 2 turn CD' },
    },
    passiveBonuses: { agility: 5, strength: 3 },
    type: 'counter',
    element: 'physical',
    accuracy: 1,
    damageCalc: (stats, level) => stats.agility * (level === 1 ? 1.2 : level === 2 ? 1.5 : 1.9),
    getCooldown: (level) => level === 3 ? 2 : 3,
    getEffects: (level) => [{ type: 'parry', chance: level === 1 ? 0.5 : level === 2 ? 0.65 : 0.8 }],
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.6, useWhenEnemyStrong: 0.75, useAsFinisher: 0.2 },
  },
  death_mark: {
    id: 'death_mark',
    name: 'Death Mark',
    description: 'Mark enemy for execution',
    maxLevel: 3,
    levels: {
      1: { damage: 1.6, execution: 0.25, cooldown: 4, duration: 3, description: '160% damage, execution at <25% HP for 3 turns, 4 turn CD' },
      2: { damage: 2.0, execution: 0.35, cooldown: 4, duration: 3, description: '200% damage, execution at <35% HP for 3 turns, 4 turn CD' },
      3: { damage: 2.6, execution: 0.5, cooldown: 3, duration: 4, description: '260% damage, execution at <50% HP for 4 turns, 3 turn CD' },
    },
    passiveBonuses: { agility: 4, strength: 4 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.9,
    damageCalc: (stats, level) => stats.agility * (level === 1 ? 1.6 : level === 2 ? 2.0 : 2.6),
    getCooldown: (level) => level === 3 ? 3 : 4,
    getEffects: (level) => [{ type: 'execution_mark', threshold: level === 1 ? 0.25 : level === 2 ? 0.35 : 0.5, duration: level === 3 ? 4 : 3 }],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.2, useWhenEnemyStrong: 0.6, useAsFinisher: 0.85 },
  },
  shadow_clone: {
    id: 'shadow_clone',
    name: 'Shadow Clone',
    description: 'Create a clone for extra attacks',
    maxLevel: 3,
    levels: {
      1: { clones: 1, damage: 0.8, cooldown: 5, duration: 2, description: '1 clone dealing 80% damage for 2 turns, 5 turn CD' },
      2: { clones: 2, damage: 0.9, cooldown: 5, duration: 2, description: '2 clones dealing 90% damage for 2 turns, 5 turn CD' },
      3: { clones: 2, damage: 1.1, cooldown: 4, duration: 3, description: '2 clones dealing 110% damage for 3 turns, 4 turn CD' },
    },
    passiveBonuses: { agility: 6, strength: 2 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.9,
    damageCalc: (stats, level) => stats.agility * (level === 1 ? 0.8 : level === 2 ? 0.9 : 1.1),
    getCooldown: (level) => level === 3 ? 4 : 5,
    getEffects: (level) => [{ type: 'summon_clone', count: level === 1 ? 1 : 2, duration: level === 3 ? 3 : 2 }],
    aiWeights: { priority: 0.75, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.65, useAsFinisher: 0.5 },
  },
  master_assassin: {
    id: 'master_assassin',
    name: 'Master Assassin',
    description: 'Guaranteed critical hit with precision',
    maxLevel: 3,
    levels: {
      1: { damage: 2.8, critChance: 1.0, multiplier: 1.5, cooldown: 5, description: '280% damage, guaranteed 150% crit, 5 turn CD' },
      2: { damage: 3.5, critChance: 1.0, multiplier: 1.8, cooldown: 5, description: '350% damage, guaranteed 180% crit, 5 turn CD' },
      3: { damage: 4.3, critChance: 1.0, multiplier: 2.2, cooldown: 4, description: '430% damage, guaranteed 220% crit, 4 turn CD' },
    },
    passiveBonuses: { agility: 7, strength: 3 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.95,
    damageCalc: (stats, level) => stats.agility * (level === 1 ? 2.8 : level === 2 ? 3.5 : 4.3),
    getCooldown: (level) => level === 3 ? 4 : 5,
    getEffects: (level) => [{ type: 'guaranteed_crit', multiplier: level === 1 ? 1.5 : level === 2 ? 1.8 : 2.2 }],
    aiWeights: { priority: 0.85, useWhenHpBelow: 0.15, useWhenEnemyStrong: 0.7, useAsFinisher: 0.9 },
  },
  shadow_dance: {
    id: 'shadow_dance',
    name: 'Shadow Dance',
    description: 'Multi-strike shadow assault',
    maxLevel: 3,
    levels: {
      1: { damage: 1.2, hits: 3, dodge: 0.3, cooldown: 4, description: '120% damage × 3 hits, 30% dodge for 2 turns, 4 turn CD' },
      2: { damage: 1.5, hits: 4, dodge: 0.45, cooldown: 4, description: '150% damage × 4 hits, 45% dodge for 2 turns, 4 turn CD' },
      3: { damage: 1.9, hits: 5, dodge: 0.6, cooldown: 3, description: '190% damage × 5 hits, 60% dodge for 3 turns, 3 turn CD' },
    },
    passiveBonuses: { agility: 7, strength: 2 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.88,
    damageCalc: (stats, level) => stats.agility * (level === 1 ? 1.2 : level === 2 ? 1.5 : 1.9),
    getCooldown: (level) => level === 3 ? 3 : 4,
    getEffects: (level) => [{ type: 'multi_hit', hits: level === 1 ? 3 : level === 2 ? 4 : 5 }, { type: 'dodge', chance: level === 1 ? 0.3 : level === 2 ? 0.45 : 0.6, duration: level === 3 ? 3 : 2 }],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.25, useWhenEnemyStrong: 0.75, useAsFinisher: 0.7 },
  },
  shadow_tsunami: {
    id: 'shadow_tsunami',
    name: 'Shadow Tsunami',
    description: 'Overwhelming wave of shadow attacks',
    maxLevel: 3,
    levels: {
      1: { damage: 3.5, hits: 6, cooldown: 7, description: '350% damage × 6 hits, 7 turn CD' },
      2: { damage: 4.3, hits: 7, cooldown: 7, description: '430% damage × 7 hits, 7 turn CD' },
      3: { damage: 5.3, hits: 8, cooldown: 6, description: '530% damage × 8 hits, 6 turn CD' },
    },
    passiveBonuses: { agility: 8, strength: 3 },
    type: 'physical',
    element: 'physical',
    accuracy: 0.85,
    damageCalc: (stats, level) => stats.agility * (level === 1 ? 3.5 : level === 2 ? 4.3 : 5.3),
    getCooldown: (level) => level === 1 ? 7 : level === 2 ? 7 : 6,
    getEffects: (level) => [{ type: 'multi_hit', hits: level === 1 ? 6 : level === 2 ? 7 : 8 }],
    aiWeights: { priority: 0.9, useWhenHpBelow: 0.1, useWhenEnemyStrong: 0.8, useAsFinisher: 0.95 },
  },

  // ==================== PALADIN SKILLS ====================
  holy_strike: {
    id: 'holy_strike',
    name: 'Holy Strike',
    description: 'Deal damage and heal from it',
    maxLevel: 3,
    levels: {
      1: { damage: 1.3, lifesteal: 0.3, cooldown: 2, description: '130% damage, heal 30% of damage, 2 turn CD' },
      2: { damage: 1.6, lifesteal: 0.4, cooldown: 2, description: '160% damage, heal 40% of damage, 2 turn CD' },
      3: { damage: 2.0, lifesteal: 0.5, cooldown: 1, description: '200% damage, heal 50% of damage, 1 turn CD' },
    },
    passiveBonuses: { strength: 2, wisdom: 1 },
    type: 'physical',
    element: 'holy',
    accuracy: 0.93,
    damageCalc: (stats, level) => stats.strength * (level === 1 ? 1.3 : level === 2 ? 1.6 : 2.0),
    getCooldown: (level) => level === 3 ? 1 : 2,
    getEffects: (level) => [{ type: 'lifesteal', value: level === 1 ? 0.3 : level === 2 ? 0.4 : 0.5 }],
    aiWeights: { priority: 0.75, useWhenHpBelow: 0.5, useWhenEnemyStrong: 0.5, useAsFinisher: 0.6 },
  },
  heal: {
    id: 'heal',
    name: 'Heal',
    description: 'Restore HP instantly',
    maxLevel: 3,
    levels: {
      1: { healPercent: 0.4, cooldown: 4, description: 'Restore 40% max HP, 4 turn CD' },
      2: { healPercent: 0.5, cooldown: 3, description: 'Restore 50% max HP, 3 turn CD' },
      3: { healPercent: 0.7, cooldown: 3, description: 'Restore 70% max HP, 3 turn CD' },
    },
    passiveBonuses: { wisdom: 2, vitality: 1 },
    type: 'healing',
    element: 'holy',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 3 : level === 2 ? 3 : 4,
    getEffects: (level) => [{ type: 'heal', value: level === 1 ? 0.4 : level === 2 ? 0.5 : 0.7 }],
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.6, useWhenEnemyStrong: 0.4, useAsFinisher: 0.0 },
  },
  divine_protection: {
    id: 'divine_protection',
    name: 'Divine Protection',
    description: 'Gain defense boost',
    maxLevel: 3,
    levels: {
      1: { defenseBoost: 0.4, duration: 2, cooldown: 4, description: '+40% defense for 2 turns, 4 turn CD' },
      2: { defenseBoost: 0.5, duration: 3, cooldown: 4, description: '+50% defense for 3 turns, 4 turn CD' },
      3: { defenseBoost: 0.7, duration: 3, cooldown: 3, description: '+70% defense for 3 turns, 3 turn CD' },
    },
    passiveBonuses: { defense: 2, vitality: 2 },
    type: 'defensive',
    element: 'holy',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 3 : 4,
    getEffects: (level) => [{ 
      type: 'defense_boost', 
      value: level === 1 ? 0.4 : level === 2 ? 0.5 : 0.7, 
      duration: level === 1 ? 2 : 3 
    }],
    aiWeights: { priority: 0.65, useWhenHpBelow: 0.55, useWhenEnemyStrong: 0.6, useAsFinisher: 0.0 },
  },
  radiant_burst: {
    id: 'radiant_burst',
    name: 'Radiant Burst',
    description: 'Holy burst that weakens foes',
    maxLevel: 3,
    levels: {
      1: { damage: 1.2, defenseDebuff: 0.2, duration: 2, cooldown: 3, description: '120% wisdom damage, -20% enemy defense for 2 turns, 3 turn CD' },
      2: { damage: 1.5, defenseDebuff: 0.3, duration: 2, cooldown: 3, description: '150% wisdom damage, -30% enemy defense for 2 turns, 3 turn CD' },
      3: { damage: 2.0, defenseDebuff: 0.4, duration: 3, cooldown: 2, description: '200% wisdom damage, -40% enemy defense for 3 turns, 2 turn CD' },
    },
    passiveBonuses: { wisdom: 2, defense: 1 },
    type: 'magical',
    element: 'holy',
    accuracy: 0.9,
    damageCalc: (stats, level) => stats.wisdom * (level === 1 ? 1.2 : level === 2 ? 1.5 : 2.0),
    getCooldown: (level) => level === 3 ? 2 : 3,
    getEffects: (level) => [{ 
      type: 'defense_boost', 
      value: -(level === 1 ? 0.2 : level === 2 ? 0.3 : 0.4), 
      duration: level === 3 ? 3 : 2 
    }],
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.4, useWhenEnemyStrong: 0.6, useAsFinisher: 0.5 },
  },
  consecration: {
    id: 'consecration',
    name: 'Consecration',
    description: 'Holy ground that heals over time',
    maxLevel: 3,
    levels: {
      1: { healPerTurn: 20, duration: 3, cooldown: 5, description: 'Heal 20 HP per turn for 3 turns, 5 turn CD' },
      2: { healPerTurn: 30, duration: 4, cooldown: 5, description: 'Heal 30 HP per turn for 4 turns, 5 turn CD' },
      3: { healPerTurn: 50, duration: 4, cooldown: 4, description: 'Heal 50 HP per turn for 4 turns, 4 turn CD' },
    },
    passiveBonuses: { wisdom: 3, vitality: 2 },
    type: 'healing',
    element: 'holy',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 4 : 5,
    getEffects: (level) => [{ 
      type: 'regeneration', 
      healPerTurn: level === 1 ? 20 : level === 2 ? 30 : 50, 
      duration: level === 1 ? 3 : 4 
    }],
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.6, useWhenEnemyStrong: 0.5, useAsFinisher: 0.0 },
  },
  judgment: {
    id: 'judgment',
    name: 'Judgment',
    description: 'Holy wrath upon enemies',
    maxLevel: 3,
    levels: {
      1: { damage: 2.0, cooldown: 4, description: '200% combined str+wis damage, 4 turn CD' },
      2: { damage: 2.5, cooldown: 4, description: '250% combined str+wis damage, 4 turn CD' },
      3: { damage: 3.0, cooldown: 3, description: '300% combined str+wis damage, 3 turn CD' },
    },
    passiveBonuses: { strength: 3, wisdom: 3 },
    type: 'magical',
    element: 'holy',
    accuracy: 0.92,
    damageCalc: (stats, level) => (stats.strength + stats.wisdom) * (level === 1 ? 1.0 : level === 2 ? 1.25 : 1.5),
    getCooldown: (level) => level === 3 ? 3 : 4,
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.3, useWhenEnemyStrong: 0.65, useAsFinisher: 0.7 },
    effects: [],
  },
  divine_shield: {
    id: 'divine_shield',
    name: 'Divine Shield',
    description: 'Complete immunity from damage',
    maxLevel: 3,
    levels: {
      1: { duration: 1, cooldown: 7, description: '100% damage immunity for 1 turn, 7 turn CD' },
      2: { duration: 2, cooldown: 6, description: '100% damage immunity for 2 turns, 6 turn CD' },
      3: { duration: 2, cooldown: 5, heal: 0.3, description: '100% immunity for 2 turns, heal 30% HP, 5 turn CD' },
    },
    passiveBonuses: { defense: 4, wisdom: 3 },
    type: 'defensive',
    element: 'holy',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 1 ? 7 : level === 2 ? 6 : 5,
    getEffects: (level) => [
      { type: 'damage_reduction', value: 1.0, duration: level === 1 ? 1 : 2 },
      ...(level === 3 ? [{ type: 'heal', value: 0.3 }] : [])
    ],
    aiWeights: { priority: 0.85, useWhenHpBelow: 0.7, useWhenEnemyStrong: 0.7, useAsFinisher: 0.0 },
  },
  martyr_strike: {
    id: 'martyr_strike',
    name: 'Martyr Strike',
    description: 'Empowered strike that grants a ward but leaves you exposed',
    maxLevel: 3,
    levels: {
      1: { damage: 2.1, cooldown: 3, description: '210% combined damage, gain Ward, become Exposed' },
      2: { damage: 2.5, cooldown: 3, description: '250% combined damage, gain Ward, become Exposed' },
      3: { damage: 3.0, cooldown: 2, description: '300% combined damage, gain Ward, become Exposed' },
    },
    passiveBonuses: { strength: 3, wisdom: 2 },
    type: 'magical',
    element: 'holy',
    accuracy: 0.85,
    damageCalc: (stats, level) => (stats.strength + stats.wisdom) * (level === 1 ? 2.1 : level === 2 ? 2.5 : 3.0),
    getCooldown: (level) => level === 3 ? 2 : 3,
    getEffects: (level) => [
      { type: 'ward', value: level === 1 ? 80 : level === 2 ? 120 : 160, duration: 1 },
      { type: 'self_exposed', value: 0.2, duration: 2 },
    ],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.4, useWhenEnemyStrong: 0.6, useAsFinisher: 0.7 },
  },
  resurrection: {
    id: 'resurrection',
    name: 'Resurrection',
    description: 'Cheat death and come back stronger',
    maxLevel: 3,
    levels: {
      1: { reviveHp: 0.3, cooldown: 10, description: 'Auto-revive at 30% HP if killed, 10 turn CD' },
      2: { reviveHp: 0.5, cooldown: 9, description: 'Auto-revive at 50% HP if killed, 9 turn CD' },
      3: { reviveHp: 0.7, cooldown: 8, damageBoost: 0.5, description: 'Auto-revive at 70% HP + 50% damage boost, 8 turn CD' },
    },
    passiveBonuses: { vitality: 5, wisdom: 4 },
    type: 'defensive',
    element: 'holy',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 1 ? 10 : level === 2 ? 9 : 8,
    getEffects: (level) => [
      { type: 'revive', hpPercent: level === 1 ? 0.3 : level === 2 ? 0.5 : 0.7 },
      ...(level === 3 ? [{ type: 'strength_boost', value: 0.5, duration: 3 }] : [])
    ],
    aiWeights: { priority: 0.9, useWhenHpBelow: 0.8, useWhenEnemyStrong: 0.6, useAsFinisher: 0.0 },
  },
  holy_wrath: {
    id: 'holy_wrath',
    name: 'Holy Wrath',
    description: 'Divine explosion that damages all',
    maxLevel: 3,
    levels: {
      1: { damage: 2.2, aoe: true, cooldown: 5, description: '220% damage, AOE effect, 5 turn CD' },
      2: { damage: 2.8, aoe: true, cooldown: 5, description: '280% damage, AOE effect, 5 turn CD' },
      3: { damage: 3.5, aoe: true, cooldown: 4, description: '350% damage, AOE effect, 4 turn CD' },
    },
    passiveBonuses: { strength: 5, wisdom: 4 },
    type: 'magical',
    element: 'holy',
    accuracy: 0.9,
    damageCalc: (stats, level) => (stats.strength + stats.wisdom) * (level === 1 ? 1.1 : level === 2 ? 1.4 : 1.75),
    getCooldown: (level) => level === 3 ? 4 : 5,
    getEffects: (level) => [{ type: 'aoe' }],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.2, useWhenEnemyStrong: 0.7, useAsFinisher: 0.8 },
  },
  guardian_angel: {
    id: 'guardian_angel',
    name: 'Guardian Angel',
    description: 'Protect and heal an ally',
    maxLevel: 3,
    levels: {
      1: { healAmount: 0.4, shield: 0.3, cooldown: 4, duration: 2, description: 'Heal 40% HP, 30% shield for 2 turns, 4 turn CD' },
      2: { healAmount: 0.55, shield: 0.45, cooldown: 4, duration: 2, description: 'Heal 55% HP, 45% shield for 2 turns, 4 turn CD' },
      3: { healAmount: 0.7, shield: 0.6, cooldown: 3, duration: 3, description: 'Heal 70% HP, 60% shield for 3 turns, 3 turn CD' },
    },
    passiveBonuses: { wisdom: 6, defense: 3 },
    type: 'healing',
    element: 'holy',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 3 : 4,
    getEffects: (level) => [
      { type: 'heal', value: level === 1 ? 0.4 : level === 2 ? 0.55 : 0.7 },
      { type: 'shield', value: level === 1 ? 0.3 : level === 2 ? 0.45 : 0.6, duration: level === 3 ? 3 : 2 }
    ],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.7, useWhenEnemyStrong: 0.5, useAsFinisher: 0.0 },
  },
  sacred_ground: {
    id: 'sacred_ground',
    name: 'Sacred Ground',
    description: 'Create blessed ground for continuous healing',
    maxLevel: 3,
    levels: {
      1: { healPerTurn: 30, cooldown: 5, duration: 4, description: 'Heal 30 HP/turn for 4 turns, 5 turn CD' },
      2: { healPerTurn: 45, cooldown: 5, duration: 4, description: 'Heal 45 HP/turn for 4 turns, 5 turn CD' },
      3: { healPerTurn: 65, cooldown: 4, duration: 5, description: 'Heal 65 HP/turn for 5 turns, 4 turn CD' },
    },
    passiveBonuses: { wisdom: 7, vitality: 2 },
    type: 'healing',
    element: 'holy',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 4 : 5,
    getEffects: (level) => [{ type: 'regeneration', healPerTurn: level === 1 ? 30 : level === 2 ? 45 : 65, duration: level === 3 ? 5 : 4 }],
    aiWeights: { priority: 0.75, useWhenHpBelow: 0.6, useWhenEnemyStrong: 0.5, useAsFinisher: 0.0 },
  },
  divine_retribution: {
    id: 'divine_retribution',
    name: 'Divine Retribution',
    description: 'Counter attacks with holy power',
    maxLevel: 3,
    levels: {
      1: { counterChance: 0.5, damageMultiplier: 1.3, cooldown: 4, duration: 3, description: '50% counter with 130% damage for 3 turns, 4 turn CD' },
      2: { counterChance: 0.65, damageMultiplier: 1.6, cooldown: 4, duration: 3, description: '65% counter with 160% damage for 3 turns, 4 turn CD' },
      3: { counterChance: 0.8, damageMultiplier: 2.0, cooldown: 3, duration: 4, description: '80% counter with 200% damage for 4 turns, 3 turn CD' },
    },
    passiveBonuses: { strength: 4, wisdom: 4 },
    type: 'counter',
    element: 'holy',
    accuracy: 1,
    damageCalc: (stats, level) => (stats.strength + stats.wisdom) * (level === 1 ? 0.65 : level === 2 ? 0.8 : 1.0),
    getCooldown: (level) => level === 3 ? 3 : 4,
    getEffects: (level) => [{ type: 'counter', chance: level === 1 ? 0.5 : level === 2 ? 0.65 : 0.8, multiplier: level === 1 ? 1.3 : level === 2 ? 1.6 : 2.0, duration: level === 3 ? 4 : 3 }],
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.65, useWhenEnemyStrong: 0.75, useAsFinisher: 0.2 },
  },
  blessing_of_light: {
    id: 'blessing_of_light',
    name: 'Blessing of Light',
    description: 'Bless allies with holy power',
    maxLevel: 3,
    levels: {
      1: { damageBoost: 0.3, defenseBoost: 0.2, cooldown: 4, duration: 3, description: '+30% damage, +20% defense for 3 turns, 4 turn CD' },
      2: { damageBoost: 0.5, defenseBoost: 0.35, cooldown: 4, duration: 3, description: '+50% damage, +35% defense for 3 turns, 4 turn CD' },
      3: { damageBoost: 0.7, defenseBoost: 0.5, cooldown: 3, duration: 4, description: '+70% damage, +50% defense for 4 turns, 3 turn CD' },
    },
    passiveBonuses: { wisdom: 6, defense: 3 },
    type: 'buff',
    element: 'holy',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 3 ? 3 : 4,
    getEffects: (level) => [
      { type: 'strength_boost', value: level === 1 ? 0.3 : level === 2 ? 0.5 : 0.7, duration: level === 3 ? 4 : 3 },
      { type: 'defense_boost', value: level === 1 ? 0.2 : level === 2 ? 0.35 : 0.5, duration: level === 3 ? 4 : 3 }
    ],
    aiWeights: { priority: 0.7, useWhenHpBelow: 0.4, useWhenEnemyStrong: 0.8, useAsFinisher: 0.3 },
  },
  purification: {
    id: 'purification',
    name: 'Purification',
    description: 'Cleanse all negative effects',
    maxLevel: 3,
    levels: {
      1: { cooldown: 5, description: 'Remove all debuffs, grant immunity 2 turns, 5 turn CD' },
      2: { cooldown: 4, description: 'Remove all debuffs, grant immunity 2 turns, heal 30% HP, 4 turn CD' },
      3: { cooldown: 4, description: 'Remove all debuffs, grant immunity 3 turns, heal 50% HP, 4 turn CD' },
    },
    passiveBonuses: { wisdom: 7, defense: 2 },
    type: 'support',
    element: 'holy',
    accuracy: 1,
    damageCalc: () => 0,
    getCooldown: (level) => level === 1 ? 5 : 4,
    getEffects: (level) => [
      { type: 'cleanse' },
      { type: 'debuff_immunity', duration: level === 3 ? 3 : 2 },
      ...(level >= 2 ? [{ type: 'heal', value: level === 2 ? 0.3 : 0.5 }] : [])
    ],
    aiWeights: { priority: 0.8, useWhenHpBelow: 0.5, useWhenEnemyStrong: 0.6, useAsFinisher: 0.0 },
  },
};

export function getClass(classId) {
  return CLASSES[classId];
}

export function getSkill(skillId) {
  return SKILLS[skillId];
}

export function getSkillsByClass(classId) {
  const playerClass = getClass(classId);
  return playerClass ? playerClass.startingSkills.map(id => SKILLS[id]) : [];
}

export function evaluateSkillUsage(skill, context, aiTendencies, worldState) {
  const weights = skill.aiWeights || {};
  let score = weights.priority || 0.3;

  const playerHpPercent = context.playerHp / context.playerMaxHp;
  const enemyHpPercent = context.enemyHp / context.enemyMaxHp;

  if (weights.useWhenHpBelow !== undefined && playerHpPercent < weights.useWhenHpBelow) {
    score += 0.2;
  }

  if (weights.useWhenEnemyStrong !== undefined && context.enemyStrength > context.playerDefense) {
    score += 0.15;
  }

  if (weights.useAsFinisher && enemyHpPercent < 0.25) {
    score += 0.25;
  }

  if (skill.type === 'defensive') {
    score += (aiTendencies?.defensivePriority || 0) * 0.2;
  } else {
    score += (aiTendencies?.aggression || 0) * 0.2;
  }

  const worldImpact = worldState?.aiImpact || {};
  if (worldImpact.aggressionBonus) score += worldImpact.aggressionBonus * 0.1;
  if (worldImpact.defensivePriorityBonus) score += worldImpact.defensivePriorityBonus * 0.1;
  if (worldImpact.riskTakingBonus) score += worldImpact.riskTakingBonus * 0.1;

  return Math.max(0, Math.min(1, score));
}
